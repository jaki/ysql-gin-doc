Scan entries are formed in \cinline{ginNewScanKey} called by
\cinline{gingetbitmap}.  Put a breakpoint after that line:

\begin{textcode}
b ginget.c:1930
\end{textcode}

Run a select that exercises the index.

\begin{sqlcode}
CREATE TABLE tstab (tsv tsvector);
CREATE INDEX ON tstab USING gin (tsv);
SELECT * FROM tstab WHERE tsv @@ to_tsquery('abc');
\end{sqlcode}

When the breakpoint hits, you'll have \cinline{IndexScanDesc scan} loaded with
the scan entries.  Three key things to observe are

\begin{textcode}
p $i = $j = 0
p ((GinScanOpaque)scan->opaque)->nkeys
p ((GinScanOpaque)scan->opaque)->keys[$i].nuserentries
p *(text*)((GinScanOpaque)scan->opaque)->keys[$i].scanEntry[$j++]->queryKey
\end{textcode}

where \textinline{$i} and \textinline{$j} should vary accordingly.  In this
case, there should be one key and one entry whose key is \textinline{abc}.

The same can be done for other opclasses:

\begin{sqlcode}
CREATE TABLE jbtab (jb jsonb);
CREATE INDEX ON jbtab USING gin (jb);
SELECT * FROM jbtab WHERE jb @> '{"def":"ghi"}';
\end{sqlcode}

In this case, there should be one key and two entries whose keys are
\textinline{\001def} and \textinline{\005ghi}.  The first byte contains flags
that, in this case, tell that the type is key and string, respectively.

If we change the opclass, the scan entries should change.

\begin{sqlcode}
DROP INDEX jbtab_jb_idx;
CREATE INDEX ON jbtab USING gin (jb jsonb_path_ops);
SELECT * FROM jbtab WHERE jb @> '{"def":"ghi"}';
\end{sqlcode}

In this case, there should be one key and one entry whose key is formatted as
an unsigned 32-bit integer.  Therefore, don't cast as \cinline{text*} this
time:

\begin{textcode}
p ((GinScanOpaque)scan->opaque)->keys[0].scanEntry[0]->queryKey
\end{textcode}

You should get \cinline{903080546}.  This is can be derived as follows:

\begin{textcode}
p $def = hash_bytes("def", 3)
p $def_rotate = ($def << 1 ) | ($def >> 31)
p $ghi = hash_bytes("ghi", 3)
p $defghi = $def_rotate ^ $ghi
\end{textcode}

See \cinline{JsonbHashScalarValue} for how this derivation is done.
